import{r as p,o as _,c as h,a as v,b,d as y,e as I,f as L,L as S}from"./vendor.13907abb.js";const P=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}};P();var E=(e,r)=>{for(const[t,n]of r)e[t]=n;return e};const O={};function A(e,r){const t=p("router-view");return _(),h(t,{key:e.$route.fullPath})}var k=E(O,[["render",A]]);const R="modulepreload",c={},w="/",i=function(r,t){return!t||t.length===0?r():Promise.all(t.map(n=>{if(n=`${w}${n}`,n in c)return;c[n]=!0;const o=n.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":R,o||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),o)return new Promise((m,f)=>{a.addEventListener("load",m),a.addEventListener("error",f)})})).then(()=>r())},j=[{path:"/",name:"dashboard",component:()=>i(()=>import("./Dashboard.9aca6bc5.js"),["assets/Dashboard.9aca6bc5.js","assets/vendor.13907abb.js","assets/headlessui.esm.cf5a0c1c.js"]),children:[{path:"",component:()=>i(()=>import("./Home.46260bc2.js"),["assets/Home.46260bc2.js","assets/vendor.13907abb.js","assets/headlessui.esm.cf5a0c1c.js"])},{path:"users",name:"user-list",component:()=>i(()=>import("./UserList.fcab616b.js"),["assets/UserList.fcab616b.js","assets/headlessui.esm.cf5a0c1c.js","assets/vendor.13907abb.js"])},{path:"/card",name:"card",component:()=>i(()=>import("./Card.bfc8ba27.js"),["assets/Card.bfc8ba27.js","assets/vendor.13907abb.js"])}]},{path:"/login",name:"login",component:()=>i(()=>import("./Login.97788b31.js"),["assets/Login.97788b31.js","assets/Login.3a30bf4f.css","assets/vendor.13907abb.js"])}],u=v({history:b(),scrollBehavior(){return{top:0}},routes:j});u.beforeEach((e,r,t)=>{const o=!["/login","/register"].includes(e.path),s=localStorage.getItem("user");if(o&&!s)return t("/login");t()});const D="http://localhost:8000/api/";class N{login(r){return y.post(D+"login",{email:r.email,password:r.password,dashboard:!0}).then(t=>(t.status==200&&(localStorage.setItem("user",JSON.stringify(t.data.data.user)),localStorage.setItem("token",JSON.stringify(t.data.data.access_token))),console.log(t),t.data))}logout(){localStorage.removeItem("user")}}var d=new N;const g=JSON.parse(localStorage.getItem("user")),$=g?{status:{loggedIn:!0},user:g}:{status:{loggedIn:!1},user:null},T={namespaced:!0,state:$,actions:{login({commit:e},r){return d.login(r).then(t=>(e("loginSuccess",t),Promise.resolve(t)),t=>(e("loginFailure"),Promise.reject(t)))},logout({commit:e}){d.logout(),e("logout")}},mutations:{loginSuccess(e,r){e.status.loggedIn=!0,e.user=r},loginFailure(e){e.status.loggedIn=!1,e.user=null},logout(e){e.status.loggedIn=!1,e.user=null}}},V=I({modules:{auth:T}}),l=L(k);l.use(V);l.use(u);l.use(S);l.mount("#app");export{E as _};
